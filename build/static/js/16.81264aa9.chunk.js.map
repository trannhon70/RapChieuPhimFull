{"version":3,"sources":["_core/models/ThongtinDatVe.js","services/QuanLyDatVeService.js","pages/Admin/ShowTime.js/ShowTime.js"],"names":["ThongTinDatVe","maLichChieu","danhSachVe","QLDatVeService","LayChiTietPhongVe","get","datVe","thongTinDatVe","post","taoLichChieu","thongTinLichChieu","baseService","ShowTime","props","formik","useFormik","initialValues","maPhim","match","params","id","ngayChieuGioChieu","maRap","giaVe","onSubmit","values","a","console","log","result","alert","data","content","response","useState","heThongRapChieu","cumRapChieu","state","setState","useEffect","QLRapService","layThongTinHeThongRap","handleChangeHeThongRap","layThongTinCumRap","tenPhim","film","localStorage","getItem","JSON","parse","onSubmitCapture","handleSubmit","name","labelCol","span","wrapperCol","remember","autoComplete","className","width","src","hinhAnh","alt","onError","e","target","onerror","style","margin","Item","label","options","map","htr","index","tenHeThongRap","value","maHeThongRap","convertSelectHTR","onChange","placeholder","cumRap","tenCumRap","maCumRap","setFieldValue","format","showTime","defaultValue","moment","min","max","htmlType"],"mappings":"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","file":"static/js/16.81264aa9.chunk.js","sourcesContent":["\r\nexport class ThongTinDatVe {\r\n    maLichChieu = 0;\r\n    danhSachVe=[];\r\n    constructor(){\r\n        \r\n    }\r\n}","import { GROUPID } from \"../util/settings/Config\";\r\nimport { ThongTinDatVe } from \"../_core/models/ThongtinDatVe\";\r\nimport { baseService } from \"./BaseSevice\";\r\n\r\n\r\nexport class QuanLyDatVeService extends baseService{\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    LayChiTietPhongVe =(maLichChieu)=>{//taiKhaon:'', matKhau:''\r\n        return this.get(`/api/QuanLyDatVe/LayDanhSachPhongVe?MaLichChieu=${maLichChieu}`,maLichChieu);\r\n    }\r\n\r\n    datVe = (thongTinDatVe= new ThongTinDatVe()) =>{//\r\n        return this.post(`/api/QuanLyDatVe/DatVe`,thongTinDatVe);   \r\n    }\r\n   \r\n    taoLichChieu = (thongTinLichChieu)=>{\r\n        return this.post(`/api/QuanLyDatVe/TaoLichChieu`,thongTinLichChieu)\r\n    }\r\n}\r\n\r\nexport const QLDatVeService = new QuanLyDatVeService();","import React, { useEffect, useState } from 'react'\r\nimport { Form, Input, Button, Select, DatePicker, Cascader, InputNumber } from 'antd';\r\nimport moment from 'moment';\r\nimport { QLRapService } from '../../../services/QuanLyRapService';\r\nimport { useFormik } from 'formik';\r\nimport { QLDatVeService } from '../../../services/QuanLyDatVeService';\r\n\r\nexport default function ShowTime(props) {\r\n\r\n    const formik = useFormik({\r\n        initialValues: {\r\n            maPhim: props.match.params.id,\r\n            ngayChieuGioChieu: '',\r\n            maRap: '',\r\n            giaVe: ''\r\n        },\r\n        onSubmit: async (values) => {\r\n            console.log('values', values);\r\n            try{\r\n                const result = await QLDatVeService.taoLichChieu(values);\r\n                alert(result.data.content)\r\n                \r\n            }\r\n            catch(err){\r\n                console.log('err',err.response?.data);\r\n            }\r\n        }\r\n    })\r\n\r\n    const [state, setState] = useState({\r\n        heThongRapChieu: [],\r\n        cumRapChieu: []\r\n    })\r\n    // console.log(state.heThongRapChieu);\r\n    useEffect(async () => {\r\n        try {\r\n            let result = await QLRapService.layThongTinHeThongRap();\r\n            setState({\r\n                ...state,\r\n                heThongRapChieu: result.data.content\r\n            })\r\n            \r\n            \r\n        }\r\n        catch (err) {\r\n\r\n        }\r\n        \r\n    }, [])\r\n\r\n    const range = (start, end) => {\r\n        const result = [];\r\n        for (let i = start; i < end; i++) {\r\n            result.push(i);\r\n        }\r\n        return result;\r\n    }\r\n    const disabledDate = (current) => {\r\n        // Can not select days before today and today\r\n        return current && current < moment().endOf('day');\r\n    }\r\n\r\n    const disabledDateTime = () => {\r\n        return {\r\n            disabledHours: () => range(0, 24).splice(4, 20),\r\n            disabledMinutes: () => range(30, 60),\r\n            disabledSeconds: () => [55, 56],\r\n        };\r\n    }\r\n\r\n\r\n    const handleChangeHeThongRap = async (values) => {\r\n        console.log('maHeThongRap', values);\r\n        //từ hệ thống rạp call api lấy thông tin rạp\r\n        try {\r\n            let result = await QLRapService.layThongTinCumRap(values);\r\n            //gán giá trị cụm rạp vào state.củmRap\r\n            setState({\r\n                ...state,\r\n                cumRapChieu: result.data.content\r\n            })\r\n        }\r\n        catch (error) {\r\n            console.log('error', error.response?.data);\r\n        }\r\n    }\r\n\r\n    const handleChangeCumRap = (values) => {\r\n        formik.setFieldValue('maRap', values)\r\n    }\r\n\r\n    const handleChangeDatePicker = (values) => {\r\n        formik.setFieldValue('ngayChieuGioChieu', moment(values).format('DD/MM/YYYY hh:mm:ss'))\r\n        console.log('DatePicker', moment(values).format('DD/MM/YYYY hh:mm:ss'));\r\n    }\r\n\r\n    const handleChangeInputNumber = (values) => {\r\n        formik.setFieldValue('giaVe',values);\r\n    }\r\n\r\n    const convertSelectHTR = () => {\r\n        // state.heThongRapChieu?.map((htr,index)=>{\r\n        //     return {label:htr.tenHeThongRap, value:htr.tenHeThongRap}\r\n        // })\r\n\r\n        return state.heThongRapChieu?.map((htr, index) => {\r\n            return { label: htr.tenHeThongRap, value: htr.maHeThongRap }\r\n        })\r\n\r\n    }\r\n    console.log('tenPhim',props.match.params.tenPhim);\r\n    let film={}\r\n    if(localStorage.getItem('filmParams')){\r\n        film = JSON.parse(localStorage.getItem('filmParams'))\r\n    }\r\n    return (\r\n        <div>\r\n            <Form onSubmitCapture={formik.handleSubmit}\r\n                name=\"basic\"\r\n                labelCol={{\r\n                    span: 8,\r\n                }}\r\n                wrapperCol={{\r\n                    span: 16,\r\n                }}\r\n                initialValues={{\r\n                    remember: true,\r\n                }}\r\n                // onFinish={onFinish}\r\n                // onFinishFailed={onFinishFailed}\r\n                autoComplete=\"off\"\r\n            >\r\n                <div className=\"flex\" >\r\n                \r\n                <img width={200} src={film.hinhAnh} alt=\"...\" onError={(e)=>{e.target.onerror = null; e.target.src=\"https://picsum.photos/id/1004/200/300\"}} />\r\n                <h3 className=\"text-2xl text-center\" style={{margin:'auto'}}>Tạo lịch chiếu phim - {props.match.params.tenPhim} </h3>\r\n                </div>\r\n                <Form.Item label=\"Hệ thống rạp\">\r\n                    <Select options={convertSelectHTR()} onChange={handleChangeHeThongRap} placeholder=\"Chọn hệ thống rạp\" />\r\n                </Form.Item>\r\n\r\n                <Form.Item label=\"Cụm rạp \">\r\n                    <Select options={state.cumRapChieu?.map((cumRap, index) => ({\r\n                        label: cumRap.tenCumRap, value: cumRap.maCumRap\r\n                    }))} onChange={handleChangeCumRap} placeholder=\"Chọn cụm rạp\" />\r\n                </Form.Item>\r\n\r\n                <Form.Item label=\"Ngày chiếu giờ chiếu \">\r\n                    <DatePicker\r\n                        format=\"DD/MM/YYYY hh:mm:ss\"\r\n                        showTime={{ defaultValue: moment('00:00:00', 'hh:mm:ss') }}\r\n                        onChange={handleChangeDatePicker}\r\n                    />\r\n                </Form.Item>\r\n\r\n                <Form.Item label=\"Giá vé \">\r\n                    <InputNumber min={75000} max={150000} onChange={handleChangeInputNumber} />\r\n                </Form.Item>\r\n                <Form.Item label=\"Chức năng\">\r\n                    <Button htmlType=\"submit\">Tạo lịch chiếu </Button>\r\n                </Form.Item>\r\n            </Form>\r\n        </div>\r\n    )\r\n}\r\n"],"sourceRoot":""}