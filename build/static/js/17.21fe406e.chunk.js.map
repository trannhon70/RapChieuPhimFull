{"version":3,"sources":["redux/actions/QuanLyPhimAction.js","services/QuanLyPhimService.js","pages/Admin/Films/Films1.js"],"names":["layDanhSachPhimAction","dispatch","a","QLPhimService","layDanhSachPhim","result","type","SET_DANH_SACH_PHIM","arrFilm","data","content","console","log","themPhimUpLoadHinhAction","formData","themPhimUpLoadHinh","alert","response","capNhatPhimUploadAction","capNhatPhimUpload","history","push","layThongTinPhimAction","maPhim","layThongTinPhim","SET_THONG_TIN_PHIM","thongTinPhim","xoaPhimAction","xoaPhim","e","layDanhSachBanner","get","GROUPID","post","delete","baseService","Films1","props","arrFilmDefault","useSelector","state","QuanLyPhimReducer","useDispatch","useEffect","useState","searchText","searchedColumn","setState","getColumnSearchProps","dataIndex","filterDropdown","setSelectedKeys","selectedKeys","confirm","clearFilters","style","padding","ref","node","searchInput","placeholder","value","onChange","target","onPressEnter","handleSearch","marginBottom","display","onClick","icon","size","width","handleReset","filterIcon","filtered","color","undefined","onFilter","record","toString","toLowerCase","includes","onFilterDropdownVisibleChange","visible","setTimeout","select","render","text","highlightStyle","backgroundColor","searchWords","autoEscape","textToHighlight","columns","title","key","film","index","src","hinhAnh","alt","height","onError","onerror","sortDirections","moTa","length","substr","address","startsWith","filterSearch","className","to","cursor","window","tenPhim","biDanh","localStorage","setItem","JSON","stringify","dataSource","rowKey"],"mappings":"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","file":"static/js/17.21fe406e.chunk.js","sourcesContent":["import { history } from \"../../App\";\r\nimport { QLPhimService } from \"../../services/QuanLyPhimService\";\r\nimport { SET_DANH_SACH_PHIM, SET_THONG_TIN_PHIM } from \"./types/QuanLyPhimType\";\r\n\r\n\r\nexport const layDanhSachPhimAction = ()=>{\r\n    return async (dispatch)=>{\r\n        try{\r\n                //sử dụng tham số \r\n                const result = await QLPhimService.layDanhSachPhim();\r\n               \r\n                dispatch({\r\n                    type:SET_DANH_SACH_PHIM ,\r\n                    arrFilm: result.data.content\r\n                   \r\n                })\r\n    \r\n            }catch(e){\r\n                console.log('e',e);\r\n            }\r\n    };\r\n}\r\n\r\nexport const themPhimUpLoadHinhAction = (formData)=>{\r\n    return async (dispatch) => {\r\n        try{\r\n            let result = await QLPhimService.themPhimUpLoadHinh(formData);\r\n            alert('Thêm phim thành công ');\r\n            console.log('result', result);\r\n        }\r\n        catch(error){\r\n            console.log(error.response?.data);\r\n        }\r\n    }\r\n}\r\n\r\nexport const capNhatPhimUploadAction = (formData)=>{\r\n    return async (dispatch) => {\r\n        try{\r\n            let result = await QLPhimService.capNhatPhimUpload(formData);\r\n            alert('Cập nhật phim thành công ');\r\n            console.log('result', result);\r\n            dispatch(layDanhSachPhimAction());\r\n            history.push('/admin/Films');\r\n        }\r\n        catch(error){\r\n            console.log(error.response?.data);\r\n        }\r\n    }\r\n}\r\n\r\nexport const layThongTinPhimAction = (maPhim)=>{\r\n    return async (dispatch) => {\r\n        try{\r\n            //sử dụng tham số \r\n            const result = await QLPhimService.layThongTinPhim(maPhim);\r\n            // console.log(result.data.content);\r\n\r\n            dispatch({\r\n                type:SET_THONG_TIN_PHIM,\r\n                thongTinPhim:result.data.content\r\n            })\r\n        }\r\n        catch (e) {\r\n            console.log('e',e);\r\n        }\r\n    }\r\n}\r\n\r\nexport const xoaPhimAction = (maPhim) =>{\r\n    return async (dispatch) =>{\r\n        try{\r\n            //sử dụng tham số \r\n            const result = await QLPhimService.xoaPhim(maPhim);\r\n            alert('Xóa phim thành công');\r\n            //sau khi xóa load lại danh sách phim mới \r\n            dispatch(layDanhSachPhimAction());\r\n        }\r\n        catch (e) {\r\n            console.log({e});\r\n        }\r\n    }\r\n}","import { GROUPID } from \"../util/settings/Config\";\r\nimport { baseService } from \"./BaseSevice\";\r\n\r\n\r\nexport class QuanLyPhimService extends baseService{\r\n    constructor(){\r\n        super();\r\n    }\r\n    layDanhSachBanner =()=>{\r\n        return this.get(`/api/QuanLyPhim/LayDanhSachBanner`);\r\n    }\r\n\r\n    layDanhSachPhim =()=>{\r\n        return this.get(`/api/QuanLyPhim/LayDanhSachPhim?maNhom=${GROUPID}`);\r\n    }\r\n    themPhimUpLoadHinh = (formData)=>{\r\n        return this.post(`/api/QuanLyPhim/ThemPhimUploadHinh`,formData);\r\n    }\r\n\r\n    layThongTinPhim = (maPhim)=>{\r\n        return this.get(`/api/QuanLyPhim/LayThongTinPhim?MaPhim=${maPhim}`);\r\n    }\r\n\r\n    capNhatPhimUpload = (formData) => {\r\n        return this.post(`/api/QuanLyPhim/CapNhatPhimUpload`,formData);\r\n    }\r\n\r\n    xoaPhim = (maPhim)=>{\r\n        return this.delete(`/api/QuanLyPhim/XoaPhim?MaPhim=${maPhim}`);\r\n    }\r\n}\r\n\r\nexport const QLPhimService = new QuanLyPhimService();","import React, { useState } from 'react'\r\nimport { Table, Input, Button, Space } from 'antd';\r\nimport Highlighter from 'react-highlight-words';\r\nimport { CalendarOutlined, DeleteOutlined, EditOutlined, SearchOutlined, TableOutlined } from '@ant-design/icons';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useEffect } from 'react';\r\nimport { layDanhSachPhimAction, xoaPhimAction } from '../../../redux/actions/QuanLyPhimAction';\r\nimport { Fragment } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { history } from '../../../App';\r\n\r\n\r\nexport default function Films1(props) {\r\n    const {arrFilmDefault} = useSelector(state => state.QuanLyPhimReducer);\r\n    const dispatch = useDispatch();\r\n    console.log({arrFilmDefault});\r\n    useEffect(() => {\r\n        dispatch(layDanhSachPhimAction());\r\n    },[]);\r\n\r\n    const data = arrFilmDefault;\r\n    const [state,setState] = useState({\r\n        searchText: '',\r\n        searchedColumn: '',\r\n      });\r\n    \r\n      const getColumnSearchProps = dataIndex => ({\r\n        filterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\r\n          <div style={{ padding: 8 }}>\r\n            <Input\r\n              ref={node => {\r\n                 state.searchInput = node;\r\n              }}\r\n              placeholder={`Search ${dataIndex}`}\r\n              value={selectedKeys[0]}\r\n              onChange={e => setSelectedKeys(e.target.value ? [e.target.value] : [])}\r\n              onPressEnter={() => handleSearch(selectedKeys, confirm, dataIndex)}\r\n              style={{ marginBottom: 8, display: 'block' }}\r\n            />\r\n            <Space>\r\n              <Button\r\n                type=\"primary\"\r\n                onClick={() => handleSearch(selectedKeys, confirm, dataIndex)}\r\n                icon={<SearchOutlined />}\r\n                size=\"small\"\r\n                style={{ width: 90 }}\r\n              >\r\n                Search\r\n              </Button>\r\n              <Button onClick={() => handleReset(clearFilters)} size=\"small\" style={{ width: 90 }}>\r\n                Reset\r\n              </Button>\r\n              {/* <Button\r\n                type=\"link\"\r\n                size=\"small\"\r\n                onClick={() => {\r\n                  confirm({ closeDropdown: false });\r\n                  setState({\r\n                    searchText: selectedKeys[0],\r\n                    searchedColumn: dataIndex,\r\n                  });\r\n                }}\r\n              >\r\n                Filter\r\n              </Button> */}\r\n            </Space>\r\n          </div>\r\n        ),\r\n        filterIcon: filtered => <SearchOutlined style={{ color: filtered ? '#1890ff' : undefined }} />,\r\n        onFilter: (value, record) =>\r\n          record[dataIndex]\r\n            ? record[dataIndex].toString().toLowerCase().includes(value.toLowerCase())\r\n            : '',\r\n        onFilterDropdownVisibleChange: visible => {\r\n          if (visible) {\r\n            setTimeout(() => state.searchInput.select(), 100);\r\n          }\r\n        },\r\n        render: text =>\r\n          state.searchedColumn === dataIndex ? (\r\n            <Highlighter\r\n              highlightStyle={{ backgroundColor: '#ffc069', padding: 0 }}\r\n              searchWords={[state.searchText]}\r\n              autoEscape\r\n              textToHighlight={text ? text.toString() : ''}\r\n            />\r\n          ) : (\r\n            text\r\n          ),\r\n      });\r\n    \r\n      const  handleSearch = (selectedKeys, confirm, dataIndex) => {\r\n        confirm();\r\n        setState({\r\n          searchText: selectedKeys[0],\r\n          searchedColumn: dataIndex,\r\n        });\r\n      };\r\n    \r\n    const  handleReset = clearFilters => {\r\n        clearFilters();\r\n        setState({ searchText: '' });\r\n      };\r\n    \r\n      const columns = [\r\n        {\r\n          title: 'Mã phim',\r\n          dataIndex: 'maPhim',\r\n          key: 'maPhim',\r\n          width: '15%',\r\n          ...getColumnSearchProps('maPhim'),\r\n        },\r\n        {\r\n          title: 'Hình ảnh ',\r\n          dataIndex: 'hinhAnh',\r\n          render:(text,film,index) =>{return <Fragment>\r\n            <img src={film.hinhAnh} alt={film.hinhAnh} width={50} height={50} onError={(e)=>{e.target.onerror = null; e.target.src=`https://picsum.photos/id/${index}/100/100`}}/>\r\n        </Fragment>},\r\n          key: 'hinhAnh',\r\n          width: '15%',\r\n        //   ...getColumnSearchProps('hinhAnh'),\r\n        },\r\n        {\r\n          title: 'Tên phim',\r\n          dataIndex: 'tenPhim',\r\n          key: 'tenPhim',\r\n          ...getColumnSearchProps('tenPhim'),\r\n          \r\n          sortDirections: ['descend', 'ascend'],\r\n          width: '20%',\r\n        },\r\n        {\r\n            title: 'Mô tả',\r\n            dataIndex: 'moTa',\r\n            key: 'moTa',\r\n            \r\n            render:(text,film) =>{return <Fragment>\r\n                {film.moTa.length >100 ? film.moTa.substr(0,100) + '...': film.moTa}\r\n            </Fragment>},\r\n            onFilter: (value, record) => record.address.startsWith(value),\r\n            filterSearch: true,\r\n            width:'40%',\r\n            // ...getColumnSearchProps('moTa'),\r\n            \r\n            // sortDirections: ['descend', 'ascend'],\r\n          },\r\n          {\r\n            title: 'Hành động',\r\n            dataIndex: 'hanhDong',\r\n        \r\n            \r\n            render:(text,film) =>{return <Fragment>\r\n                {<div className=\"flex gap-4\">\r\n                    <NavLink to={`/admin/Films/edit/${film.maPhim}`} key={1} className=\"text-2xl \"><EditOutlined style={{color: '#006400'}}/></NavLink>\r\n                    <span key={2} style={{cursor:'pointer'}} className=\"text-2xl \" onClick={()=>{\r\n                      //goi action xóa\r\n                      if(window.confirm('Bạn có chắc muốn xóa phim ' + film.tenPhim)){\r\n                        //gọi action\r\n                        dispatch(xoaPhimAction(film.maPhim))\r\n                      }\r\n                    }}><DeleteOutlined style={{color: 'red'}}/></span>\r\n                     <NavLink to={`/admin/showtime/${film.maPhim}/${film.biDanh}`} key={3} className=\"text-2xl \"><CalendarOutlined  style={{color: 'green'}} onClick={()=>{\r\n                       localStorage.setItem('filmParams',JSON.stringify(film));\r\n                      \r\n                     }}/></NavLink>\r\n    \r\n                    </div>}\r\n            </Fragment>},\r\n            onFilter: (value, record) => record.address.startsWith(value),\r\n            filterSearch: true,\r\n            width: '10%',\r\n        },\r\n      ];\r\n    return (\r\n        <div>\r\n            <h3 className=\"text-center text-2xl\">Danh sách phim</h3>\r\n            <button  className=\"btn btn-outline-success mb-3\"onClick={() =>{\r\n                history.push('/admin/Films/addnew')\r\n            }}>Thêm phim</button>\r\n            <Table columns={columns} dataSource={data} rowKey={\"maPhim\"} />\r\n        </div>\r\n    )\r\n}\r\n"],"sourceRoot":""}