{"version":3,"sources":["services/QuanLyNguoiDungService.js","redux/actions/QuanLyNguoiDungAction.js","pages/Login/Login.js"],"names":["QLNguoiDungService","dangNhap","thongTinDangNhap","post","dangKy","thongTinNguoiDung","layLichSuDatVe","baseService","dangNhapAction","dispatch","a","result","localStorage","setItem","USER_LOGIN","JSON","stringify","data","content","TOKEN","accessToken","console","log","type","DANG_NHAP_ACTION","userLogin","alert","history","goBack","response","dangKyAction","push","e","LayThongTinNguoiDungAction","SET_THONG_TIN_NGUOI_DUNG","Login","props","useDispatch","useSelector","state","QuanLyNguoiDungReducer","formik","useFormik","initialValues","taiKhoan","matKhau","onSubmit","values","className","handleSubmit","name","onChange","handleChange","required","id","to","onClick","window","location","reload"],"mappings":"sSAsBaA,EAAqB,IAlBlC,kDACI,aAAc,IAAD,8BACT,gBAGJC,SAAU,SAACC,GACP,OAAO,EAAKC,KAAL,gCAA0CD,IALxC,EAQbE,OAAO,SAACC,GACJ,OAAO,EAAKF,KAAK,8BAA8BE,IATtC,EAYbC,eAAiB,WACb,OAAO,EAAKH,KAAK,0CAbR,EADjB,U,OAA4CI,I,SC2B/BC,EAAe,SAACN,GACzB,8CAAO,WAAMO,GAAN,iBAAAC,EAAA,+EAEsBV,EAAmBC,SAASC,GAFlD,OAEOS,EAFP,OAICC,aAAaC,QAAQC,IAAWC,KAAKC,UAAUL,EAAOM,KAAKC,UAC3DN,aAAaC,QAAQM,IAAMR,EAAOM,KAAKC,QAAQE,aAC/CC,QAAQC,IAAI,SAASX,GACrBF,EAAS,CACLc,KAAMC,IACNC,UAAWd,EAAOM,KAAKC,UAI3BQ,MAAM,kEAENC,IAAQC,SAfT,kDAkBCP,QAAQC,IAAI,MAAZ,UAAkB,KAAIO,gBAAtB,aAAkB,EAAcZ,MAChCS,MAAM,wEAnBP,0DAAP,uDA+BSI,EAAe,SAACzB,GACzB,8CAAO,WAAMI,GAAN,eAAAC,EAAA,+EAEsBV,EAAmBI,OAAOC,GAFhD,OAEOM,EAFP,OAICe,MAAM,iGACNC,IAAQI,KAAK,UACbV,QAAQC,IAAI,CAACX,WANd,gDASCU,QAAQC,IAAI,CAACU,EAAC,OACdN,MAAM,8GAVP,yDAAP,uDAeSO,EAA2B,SAAC/B,GACrC,8CAAO,WAAMO,GAAN,iBAAAC,EAAA,+EAEsBV,EAAmBM,iBAFzC,OAEOK,EAFP,OAGCU,QAAQC,IAAI,SAASX,GACrBF,EAAS,CACLc,KAAMW,IACN7B,kBAAmBM,EAAOM,KAAKC,UANpC,gDAYCG,QAAQC,IAAI,MAAZ,UAAkB,KAAIO,gBAAtB,aAAkB,EAAcZ,MAZjC,yDAAP,wD,uDChFJ,4GAQe,SAASkB,EAAMC,GAC1B,IAAM3B,EAAW4B,cACTZ,EAAca,aAAY,SAAAC,GAAK,OAAIA,EAAMC,0BAAzCf,UACRJ,QAAQC,IAAI,YAAaG,GACzB,IAAMgB,EAASC,YAAU,CACrBC,cAAe,CACXC,SAAU,GACVC,QAAS,IAGbC,SAAU,SAAAC,GACNtC,EAASD,YAAeuC,OAOhC,OACI,sBAAKC,UAAU,YAAf,UACI,uCACA,uBAAMF,SAAUL,EAAOQ,aAAvB,UACI,sBAAKD,UAAU,WAAf,UACI,uBAAOzB,KAAK,OAAQ2B,KAAK,WAAWC,SAAUV,EAAOW,aAAcC,UAAQ,IAC3E,gDAEJ,sBAAKL,UAAU,WAAf,UACI,uBAAOzB,KAAK,WAAW+B,GAAG,UAAUJ,KAAK,UAAUC,SAAUV,EAAOW,aAAcC,UAAQ,IAC1F,gDAEJ,8BACA,oBAAGL,UAAU,aAAb,0DAAkD,cAAC,IAAD,CAASO,GAAG,YAAYP,UAAU,eAAlC,mBAAlD,SAEA,yBAAQzB,KAAK,SAASiC,QAAS,WAC3BC,OAAOC,SAASC,UADpB,UAGI,yBACA,yBACA,yBACA,yBANJ","file":"static/js/14.a15c24fa.chunk.js","sourcesContent":["import { GROUPID } from \"../util/settings/Config\";\r\nimport { baseService } from \"./BaseSevice\";\r\n\r\n\r\nexport class QuanLyNguoiDungService extends baseService{\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    dangNhap =(thongTinDangNhap)=>{//taiKhaon:'', matKhau:''\r\n        return this.post(`/api/QuanLyNguoiDung/DangNhap`,thongTinDangNhap);\r\n    }\r\n\r\n    dangKy=(thongTinNguoiDung)=>{\r\n        return this.post('/api/QuanLyNguoiDung/DangKy',thongTinNguoiDung);\r\n    }\r\n    \r\n    layLichSuDatVe = ()=>{\r\n        return this.post('/api/QuanLyNguoiDung/ThongTinTaiKhoan');\r\n    }\r\n}\r\n\r\nexport const QLNguoiDungService = new QuanLyNguoiDungService();","import axios from \"axios\";\r\nimport { history } from \"../../App\";\r\nimport { QLNguoiDungService } from \"../../services/QuanLyNguoiDungService\";\r\nimport { DOMAIN, TOKEN, USER_LOGIN } from \"../../util/settings/Config\";\r\nimport { DANG_NHAP_ACTION, SET_THONG_TIN_NGUOI_DUNG } from \"./types/QuanLyNguoiDungType\";\r\n\r\nexport const getCheckoutAction = () => {\r\n    return async dispatch => {\r\n        try{\r\n            const result = await axios({\r\n                url:`${DOMAIN}/api/QuanLyNguoiDung/ThongTinTaiKhoan`,\r\n                method:'POST',\r\n                headers:{\r\n                    \"Authorization\": `Bearer ${localStorage.getItem(TOKEN)}`\r\n                }});\r\n\r\n\r\n                //Sau khi có dữ liệu từ api => dispatch lên reducer\r\n\r\n                dispatch({\r\n                    type:'SET_PROFILE',\r\n                    profile:result.data.content\r\n                })\r\n            \r\n\r\n        }catch(err){\r\n            console.log({err})\r\n        }\r\n    }\r\n}\r\n\r\nexport const dangNhapAction=(thongTinDangNhap)=>{\r\n    return async dispatch=>{\r\n        try{\r\n            const result = await QLNguoiDungService.dangNhap(thongTinDangNhap);\r\n            //lưu thông tin đăng nhập người dùng vào localStorage\r\n            localStorage.setItem(USER_LOGIN,JSON.stringify(result.data.content));\r\n            localStorage.setItem(TOKEN,result.data.content.accessToken);          \r\n            console.log('result',result);\r\n            dispatch({\r\n                type: DANG_NHAP_ACTION,\r\n                userLogin: result.data.content,\r\n                \r\n            })\r\n            //dùng history để chuyển trang tương ứng bên trong component là props.history.push\r\n            alert('Bạn đã đăng nhập thành công ');\r\n            //  history.push('/detail/:id');\r\n            history.goBack();\r\n            // window.location.reload(); \r\n        }catch(err){\r\n            console.log('err',err.response?.data);\r\n            alert('Tài khoản hoặc mật khẩu không đúng');\r\n        }\r\n    }\r\n}\r\n// thông tin người dùng{\r\n//     \"taiKhoan\": \"string\",\r\n//     \"matKhau\": \"string\",\r\n//     \"email\": \"string\",\r\n//     \"soDt\": \"string\",\r\n//     \"maNhom\": \"string\",\r\n//     \"hoTen\": \"string\"\r\n//   }\r\nexport const dangKyAction = (thongTinNguoiDung)=>{\r\n    return async dispatch=>{\r\n        try {\r\n            const result = await QLNguoiDungService.dangKy(thongTinNguoiDung);\r\n            //sau khi đăng ký thành công chuyển hướng tranh\r\n            alert('Chúc mừng bạn đã đăng ký tài khoản thành công');\r\n            history.push('/login');\r\n            console.log({result});\r\n        }\r\n        catch (e) {\r\n            console.log({e});\r\n            alert('Tài khoản hoặc email của bạn đã được đăng ký !!');\r\n        }\r\n    }\r\n}\r\n\r\nexport const LayThongTinNguoiDungAction=(thongTinDangNhap)=>{\r\n    return async dispatch=>{\r\n        try{\r\n            const result = await QLNguoiDungService.layLichSuDatVe();\r\n            console.log('result',result);\r\n            dispatch({\r\n                type: SET_THONG_TIN_NGUOI_DUNG,\r\n                thongTinNguoiDung: result.data.content\r\n            })\r\n            //dùng history để chuyển trang tương ứng bên trong component là props.history.push\r\n            \r\n           \r\n        }catch(err){\r\n            console.log('err',err.response?.data);\r\n            \r\n        }\r\n    }\r\n}","import { useFormik } from 'formik';\r\nimport React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { dangNhapAction } from '../../redux/actions/QuanLyNguoiDungAction';\r\nimport './Login.scss'\r\n\r\n\r\nexport default function Login(props) {\r\n    const dispatch = useDispatch();\r\n    const { userLogin } = useSelector(state => state.QuanLyNguoiDungReducer);\r\n    console.log('userLogin', userLogin);\r\n    const formik = useFormik({\r\n        initialValues: {\r\n            taiKhoan: '',\r\n            matKhau: '',\r\n\r\n        },\r\n        onSubmit: values => {\r\n            dispatch(dangNhapAction(values));\r\n            // console.log('values', values);\r\n            // window.location.reload();\r\n        },\r\n    });\r\n\r\n\r\n    return (\r\n        <div className=\"login-box\">\r\n            <h2>Login</h2>\r\n            <form onSubmit={formik.handleSubmit} >\r\n                <div className=\"user-box\">\r\n                    <input type=\"text\"  name=\"taiKhoan\" onChange={formik.handleChange} required />\r\n                    <label>Username</label>\r\n                </div>\r\n                <div className=\"user-box\">\r\n                    <input type=\"password\" id=\"myInput\" name=\"matKhau\" onChange={formik.handleChange} required />\r\n                    <label>Password</label>\r\n                </div>\r\n                <div>\r\n                <p className=\"text-white\">Bạn chưa có tài khoản ? <NavLink to='/register' className=\"text-red-600\">Sigup</NavLink> </p>\r\n                </div>\r\n                <button type=\"submit\" onClick={()=>{\r\n                    window.location.reload()\r\n                }}>\r\n                    <span />\r\n                    <span />\r\n                    <span />\r\n                    <span />\r\n                    Login\r\n                </button>\r\n            </form>\r\n        </div>\r\n\r\n       \r\n\r\n    )\r\n}\r\n"],"sourceRoot":""}