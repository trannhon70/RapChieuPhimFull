{"version":3,"sources":["_core/models/ThongtinDatVe.js","services/QuanLyNguoiDungService.js","redux/actions/QuanLyNguoiDungAction.js","services/QuanLyDatVeService.js","pages/Checkout/Checkout.module.css","redux/actions/LoadingAction.js","redux/actions/QuanLyDatVeAction.js","pages/Checkout/Checkout.js"],"names":["ThongTinDatVe","maLichChieu","danhSachVe","QLNguoiDungService","dangNhap","thongTinDangNhap","post","dangKy","thongTinNguoiDung","layLichSuDatVe","baseService","dangNhapAction","dispatch","a","result","localStorage","setItem","USER_LOGIN","JSON","stringify","data","content","TOKEN","accessToken","console","log","type","DANG_NHAP_ACTION","userLogin","alert","history","goBack","response","dangKyAction","push","e","LayThongTinNguoiDungAction","SET_THONG_TIN_NGUOI_DUNG","QLDatVeService","LayChiTietPhongVe","get","datVe","thongTinDatVe","taoLichChieu","thongTinLichChieu","module","exports","displayLoadingAction","hideLoadingAction","layChiTietPhongVeAction","status","SET_CHI_TIET_PHONG_VE","chiTietPhongVe","Checkout","props","useSelector","state","QuanLyNguoiDungReducer","QuanLyDatVeReducer","danhSachGheDangDat","danhSachGheKhachDat","useDispatch","useEffect","action","match","params","id","thongTinPhim","danhSachGhe","style","padding","minHeight","className","width","margin","styles","fontSize","marginBottom","map","ghe","index","classGheVip","loaiGhe","classGheDaDat","daDat","indexGheDD","findIndex","gheDD","maGhe","classGheKhachDat","gheKD","classGheDaDuocDat","taiKhoan","taiKhoanNguoiDat","onClick","DAT_VE","gheDuocChon","disabled","class","stt","tenPhim","tenCumRap","diaChi","ngayChieu","gioChieu","tenRap","_","sortBy","tenGhe","giaVe","reduce","tongTien","toLocaleString","hoTen","email","DAT_VE_HOAN_TAT","CHUYEN_TAB","datVeAction","KetQuaDatVe","ticket","seats","first","alt","onError","target","onerror","src","hinhAnh","moment","ngayDat","format","tenHeThongRap","renderTicketItem","TabPane","Tabs","tabActive","defaultActiveKey","activeKey","onChange","key","number","toString","tab"],"mappings":"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","file":"static/js/10.f3afae63.chunk.js","sourcesContent":["\r\nexport class ThongTinDatVe {\r\n    maLichChieu = 0;\r\n    danhSachVe=[];\r\n    constructor(){\r\n        \r\n    }\r\n}","import { GROUPID } from \"../util/settings/Config\";\r\nimport { baseService } from \"./BaseSevice\";\r\n\r\n\r\nexport class QuanLyNguoiDungService extends baseService{\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    dangNhap =(thongTinDangNhap)=>{//taiKhaon:'', matKhau:''\r\n        return this.post(`/api/QuanLyNguoiDung/DangNhap`,thongTinDangNhap);\r\n    }\r\n\r\n    dangKy=(thongTinNguoiDung)=>{\r\n        return this.post('/api/QuanLyNguoiDung/DangKy',thongTinNguoiDung);\r\n    }\r\n    \r\n    layLichSuDatVe = ()=>{\r\n        return this.post('/api/QuanLyNguoiDung/ThongTinTaiKhoan');\r\n    }\r\n}\r\n\r\nexport const QLNguoiDungService = new QuanLyNguoiDungService();","import axios from \"axios\";\r\nimport { history } from \"../../App\";\r\nimport { QLNguoiDungService } from \"../../services/QuanLyNguoiDungService\";\r\nimport { DOMAIN, TOKEN, USER_LOGIN } from \"../../util/settings/Config\";\r\nimport { DANG_NHAP_ACTION, SET_THONG_TIN_NGUOI_DUNG } from \"./types/QuanLyNguoiDungType\";\r\n\r\nexport const getCheckoutAction = () => {\r\n    return async dispatch => {\r\n        try{\r\n            const result = await axios({\r\n                url:`${DOMAIN}/api/QuanLyNguoiDung/ThongTinTaiKhoan`,\r\n                method:'POST',\r\n                headers:{\r\n                    \"Authorization\": `Bearer ${localStorage.getItem(TOKEN)}`\r\n                }});\r\n\r\n\r\n                //Sau khi có dữ liệu từ api => dispatch lên reducer\r\n\r\n                dispatch({\r\n                    type:'SET_PROFILE',\r\n                    profile:result.data.content\r\n                })\r\n            \r\n\r\n        }catch(err){\r\n            console.log({err})\r\n        }\r\n    }\r\n}\r\n\r\nexport const dangNhapAction=(thongTinDangNhap)=>{\r\n    return async dispatch=>{\r\n        try{\r\n            const result = await QLNguoiDungService.dangNhap(thongTinDangNhap);\r\n            //lưu thông tin đăng nhập người dùng vào localStorage\r\n            localStorage.setItem(USER_LOGIN,JSON.stringify(result.data.content));\r\n            localStorage.setItem(TOKEN,result.data.content.accessToken);          \r\n            console.log('result',result);\r\n            dispatch({\r\n                type: DANG_NHAP_ACTION,\r\n                userLogin: result.data.content,\r\n                \r\n            })\r\n            //dùng history để chuyển trang tương ứng bên trong component là props.history.push\r\n            alert('Bạn đã đăng nhập thành công ');\r\n            //  history.push('/detail/:id');\r\n            history.goBack();\r\n            // window.location.reload(); \r\n        }catch(err){\r\n            console.log('err',err.response?.data);\r\n            alert('Tài khoản hoặc mật khẩu không đúng');\r\n        }\r\n    }\r\n}\r\n// thông tin người dùng{\r\n//     \"taiKhoan\": \"string\",\r\n//     \"matKhau\": \"string\",\r\n//     \"email\": \"string\",\r\n//     \"soDt\": \"string\",\r\n//     \"maNhom\": \"string\",\r\n//     \"hoTen\": \"string\"\r\n//   }\r\nexport const dangKyAction = (thongTinNguoiDung)=>{\r\n    return async dispatch=>{\r\n        try {\r\n            const result = await QLNguoiDungService.dangKy(thongTinNguoiDung);\r\n            //sau khi đăng ký thành công chuyển hướng tranh\r\n            alert('Chúc mừng bạn đã đăng ký tài khoản thành công');\r\n            history.push('/login');\r\n            console.log({result});\r\n        }\r\n        catch (e) {\r\n            console.log({e});\r\n            alert('Tài khoản hoặc email của bạn đã được đăng ký !!');\r\n        }\r\n    }\r\n}\r\n\r\nexport const LayThongTinNguoiDungAction=(thongTinDangNhap)=>{\r\n    return async dispatch=>{\r\n        try{\r\n            const result = await QLNguoiDungService.layLichSuDatVe();\r\n            console.log('result',result);\r\n            dispatch({\r\n                type: SET_THONG_TIN_NGUOI_DUNG,\r\n                thongTinNguoiDung: result.data.content\r\n            })\r\n            //dùng history để chuyển trang tương ứng bên trong component là props.history.push\r\n            \r\n           \r\n        }catch(err){\r\n            console.log('err',err.response?.data);\r\n            \r\n        }\r\n    }\r\n}","import { GROUPID } from \"../util/settings/Config\";\r\nimport { ThongTinDatVe } from \"../_core/models/ThongtinDatVe\";\r\nimport { baseService } from \"./BaseSevice\";\r\n\r\n\r\nexport class QuanLyDatVeService extends baseService{\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    LayChiTietPhongVe =(maLichChieu)=>{//taiKhaon:'', matKhau:''\r\n        return this.get(`/api/QuanLyDatVe/LayDanhSachPhongVe?MaLichChieu=${maLichChieu}`,maLichChieu);\r\n    }\r\n\r\n    datVe = (thongTinDatVe= new ThongTinDatVe()) =>{//\r\n        return this.post(`/api/QuanLyDatVe/DatVe`,thongTinDatVe);   \r\n    }\r\n   \r\n    taoLichChieu = (thongTinLichChieu)=>{\r\n        return this.post(`/api/QuanLyDatVe/TaoLichChieu`,thongTinLichChieu)\r\n    }\r\n}\r\n\r\nexport const QLDatVeService = new QuanLyDatVeService();","// extracted by mini-css-extract-plugin\nmodule.exports = {\"trapezoid\":\"Checkout_trapezoid__6fjRb\",\"backGround\":\"Checkout_backGround__Psanz\",\"thangNgang\":\"Checkout_thangNgang__3r0oj\"};","export const displayLoadingAction = {\r\n    type:'DISPLAY_LOADING'\r\n}\r\n\r\nexport const hideLoadingAction = {\r\n    type:'HIDE_LOADING'\r\n}","import { QLDatVeService } from \"../../services/QuanLyDatVeService\"\r\nimport { ThongTinDatVe } from \"../../_core/models/ThongtinDatVe\";\r\nimport { displayLoadingAction, hideLoadingAction } from \"./LoadingAction\";\r\nimport { CHUYEN_TAB, DAT_VE_HOAN_TAT, SET_CHI_TIET_PHONG_VE } from \"./types/QuanLyDatVeType\";\r\n\r\n\r\nexport const layChiTietPhongVeAction = (maLichChieu) => {\r\n    return async dispatch => {\r\n        try {\r\n            const result = await QLDatVeService.LayChiTietPhongVe(maLichChieu);\r\n            // console.log('result',result);\r\n            if (result.status === 200) {\r\n                dispatch({\r\n                    type: SET_CHI_TIET_PHONG_VE,\r\n                    chiTietPhongVe: result.data.content\r\n                })\r\n            }\r\n        } catch (err) {\r\n            console.log('err', err.response?.data);\r\n        }\r\n    }\r\n}\r\n\r\nexport const datVeAction = (thongTinDatVe = new ThongTinDatVe()) => {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch(displayLoadingAction)\r\n            const result = await QLDatVeService.datVe(thongTinDatVe);\r\n            console.log('result', result.data.content);\r\n\r\n            //đặt vé thành công gọi api load lại phòng vé \r\n            await dispatch(layChiTietPhongVeAction(thongTinDatVe.maLichChieu));\r\n            await dispatch({type: DAT_VE_HOAN_TAT});\r\n            await dispatch(hideLoadingAction);\r\n            dispatch({type:CHUYEN_TAB});\r\n            dispatch(hideLoadingAction)\r\n        } catch (e) {\r\n            console.log(e.response?.data);\r\n            dispatch(hideLoadingAction)\r\n        }\r\n    }\r\n}\r\n\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Fragment } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { datVeAction, layChiTietPhongVeAction } from '../../redux/actions/QuanLyDatVeAction';\r\nimport styles from './Checkout.module.css';\r\nimport './Checkout.css';\r\n\r\nimport { DAT_VE } from '../../redux/actions/types/QuanLyDatVeType';\r\nimport _ from 'lodash';\r\nimport { ThongTinDatVe } from '../../_core/models/ThongtinDatVe';\r\nimport { Tabs } from 'antd';\r\nimport { LayThongTinNguoiDungAction } from '../../redux/actions/QuanLyNguoiDungAction';\r\nimport moment from 'moment';\r\nimport { history } from '../../App';\r\nimport{connection} from '../../index'\r\n\r\n\r\n\r\n\r\nfunction Checkout(props) {\r\n    const { userLogin } = useSelector(state => state.QuanLyNguoiDungReducer);\r\n    const { chiTietPhongVe, danhSachGheDangDat ,danhSachGheKhachDat} = useSelector(state => state.QuanLyDatVeReducer);\r\n    // console.log({chiTietPhongVe});\r\n\r\n    const dispatch = useDispatch();\r\n    useEffect(() => {\r\n        //gọi hàm tạo ra 1 async function\r\n        const action = layChiTietPhongVeAction(props.match.params.id);\r\n        //dispatch function này \r\n        dispatch(action);\r\n\r\n        //load danh sách ghế đang đặt từ serve về\r\n        //connection.on(\"loadDanhSachGheDaDat\", (dsGheDangDat)=>{\r\n            //console.log('danhSachGheKhachDat',dsGheDangDat);\r\n       // })\r\n    })\r\n    const { thongTinPhim, danhSachGhe } = chiTietPhongVe;\r\n\r\n    const renderSeats = () => {\r\n        return danhSachGhe.map((ghe, index) => {\r\n            let classGheVip = ghe.loaiGhe === 'Vip' ? 'gheVip' : '';\r\n            let classGheDaDat = ghe.daDat === true ? 'gheDaDat' : '';\r\n            let classGheDangDat = '';\r\n            //kiểm tra từng ghế render xem có trong mảng ghế đang đặt hay không \r\n            let indexGheDD = danhSachGheDangDat.findIndex(gheDD => gheDD.maGhe === ghe.maGhe);\r\n\r\n            //kiểm tra từng render xem có phải ghế khách đặt hay không \r\n            let classGheKhachDat='';\r\n            let indexGheKD = danhSachGheKhachDat.findIndex(gheKD => gheKD.maGhe === ghe.maGhe);\r\n            if(indexGheKD !== -1){\r\n                classGheKhachDat = 'gheKhachDat';\r\n            }\r\n\r\n            if (indexGheDD != -1) {\r\n                classGheDaDat = 'gheDangDat'\r\n            }\r\n\r\n            //người dùng đặt ghế sẽ hiện shadow\r\n            let classGheDaDuocDat = '';\r\n            if (userLogin.taiKhoan === ghe.taiKhoanNguoiDat) {\r\n                classGheDaDuocDat = 'gheDaDuocDat';\r\n            }\r\n\r\n            return <Fragment key={index} >\r\n                <button onClick={() => {\r\n                    dispatch(\r\n                        {\r\n                        type: DAT_VE,\r\n                        gheDuocChon: ghe\r\n                    }\r\n                    \r\n                    )\r\n                }} disabled={ghe.daDat || classGheKhachDat !== ''} className={`ghe ${classGheVip} ${classGheDaDat} ${classGheDangDat} ${classGheDaDuocDat} ${classGheKhachDat} text-center `} key={index}>\r\n                    {ghe.daDat ? classGheDaDuocDat != '' ? <i className=\"fa fa-user-ninja\" style={{ fontSize: '18px' }}></i> : <i className=\"fa fa-times\"   ></i> :classGheKhachDat !== ''?<i class=\"fa fa-user-slash\"></i> : ghe.stt}\r\n\r\n                </button>\r\n                {(index + 1) % 16 === 0 ? <br /> : ''}\r\n            </Fragment>\r\n        })\r\n    }\r\n\r\n\r\n    return (\r\n        <div  style={{ padding: '10px' }}>\r\n            <div style={{ minHeight: '100vh' }}>\r\n                <div className=\" row \">\r\n                    <div className=\"col-12 col-lg-9  \">\r\n                        <div className=\"mt-4 bg-green-600 \" style={{ width: '90%', margin: 'auto' }}>\r\n                            <div className={`${styles['thangNgang']}`}>\r\n\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"\" style={{ width: '80%', margin: 'auto' }}>\r\n                            <div className={`${styles['trapezoid']}`}>\r\n                                <h3 className=\"text-white text-center\" style={{ fontSize: '20px', marginBottom: '-24px' }}>Màn hình </h3>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"text-center\">\r\n                            {renderSeats()}\r\n                        </div>\r\n                        <div className=\"mt-2 mb-3 text-base flex justify-center\">\r\n                            <table className=\"divide-y dicide-gray-200 w-11/12\">\r\n                                <thead className=\"bg-gray-500\">\r\n                                    <tr>\r\n                                        <th>Ghế chưa đặt</th>\r\n                                        <th>Ghế đang đặt</th>\r\n                                        <th>Ghế Vip</th>\r\n                                        <th>Ghế đã đặt </th>\r\n                                        <th>Ghế bạn đặt </th>\r\n                                        <th>Ghế khách đang đặt </th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody className=\"\">\r\n                                    <tr>\r\n                                        <th><button className=\"ghe text-center\">00</button></th>\r\n                                        <th><button className=\"ghe gheDangDat text-center\"><i className=\"fa fa-check\"></i></button></th>\r\n                                        <th><button className=\"ghe gheVip text-center\"><i className=\"fa fa-check\"></i></button></th>\r\n                                        <th><button className=\"ghe gheDaDat text-center\"><i className=\"fa fa-check\"></i></button></th>\r\n                                        <th><button className=\"ghe gheDaDuocDat text-center \"><i className=\"fa fa-check text-white\"></i></button></th>\r\n                                        <th><button className=\"ghe gheKhachDat text-center\"><i className=\"fa fa-check\"></i></button></th>\r\n\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-12 col-lg-3  text-white mt-4\">\r\n                        {/* <h3 className=\"text-center text-2xl text-green-600\">0 đ</h3> */}\r\n\r\n                        <h3 className=\"text-xl text-white\">{thongTinPhim.tenPhim}</h3>\r\n                        <p>Địa điểm: {thongTinPhim.tenCumRap} - {thongTinPhim.diaChi} </p>\r\n                        <p>Ngày chiếu : {thongTinPhim.ngayChieu} - {thongTinPhim.gioChieu} - {thongTinPhim.tenRap} </p>\r\n                        <hr />\r\n                        <div className=\" flex-row \">\r\n                            <div className=\"w-full\">\r\n                                <span className=\"text-xl text-red-600 pr-2\">Ghế đã chọn : </span>\r\n                                <div className=\"table\">\r\n                                    <thead>\r\n                                        {_.sortBy(danhSachGheDangDat, ['stt']).map((gheDD, index) => {\r\n                                            return <tr key={index} className=\"text-white text-lg pr-2 \" >\r\n                                                <td>Số ghế : {gheDD.tenGhe}  </td>\r\n                                                <td className=\"\">{gheDD.giaVe} VNĐ </td>\r\n                                            </tr>\r\n\r\n                                        })}\r\n\r\n                                    </thead>\r\n                                </div>\r\n\r\n\r\n                            </div>\r\n                            <div className=\"text-right col-span-1\">\r\n                                <span className=\" text-xl text-red-600\">Tổng tiền thanh toán : &nbsp;\r\n                                    {danhSachGheDangDat.reduce((tongTien, ghe, index) => {\r\n                                        return tongTien += ghe.giaVe;\r\n                                    }, 0).toLocaleString()} VNĐ\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <hr />\r\n                        <div className=\"my-1 text-lg\">\r\n                            <i>Hello </i>\r\n                            {userLogin?.hoTen}\r\n                        </div>\r\n                        <hr />\r\n                        <div className=\"my-1 text-lg\">\r\n                            <i>Email : </i>\r\n                            {userLogin.email}\r\n                        </div>\r\n\r\n\r\n                        <div className=\"mb-0 flex flex-col  items-center\" style={{ marginBottom: '0' }}>\r\n                            <div className=\"bg-green-600 w-full text-white text-xl text-center py-2 font-bold cursor-pointer\" onClick={() => {\r\n                                const thongTinDatVe = new ThongTinDatVe();\r\n                                thongTinDatVe.maLichChieu = props.match.params.id;\r\n                                thongTinDatVe.danhSachVe = danhSachGheDangDat;\r\n                                console.log((thongTinDatVe));\r\n                                dispatch(datVeAction(thongTinDatVe));\r\n                            }}>\r\n                                ĐẶT VÉ\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nfunction KetQuaDatVe(props) {\r\n    const dispatch = useDispatch();\r\n    const {thongTinNguoiDung}= useSelector(state => state.QuanLyNguoiDungReducer);\r\n    const { userLogin } = useSelector(state => state.QuanLyNguoiDungReducer);\r\n    useEffect(() => {\r\n        dispatch(LayThongTinNguoiDungAction());\r\n    },[])\r\n    console.log('thongTinNguoiDung',thongTinNguoiDung);\r\n\r\n    const  renderTicketItem = function(){\r\n        return thongTinNguoiDung.thongTinDatVe?.map((ticket,index)=>{\r\n\r\n            const seats = _.first(ticket.danhSachGhe);\r\n            return <div className=\"p-2 lg:w-1/3 md:w-1/2 w-full text-white\" key={index}>\r\n            <div className=\"h-full flex items-center border-gray-200 border p-4 rounded-lg\">\r\n                <img alt=\"team\" className=\"w-16 h-16 bg-gray-100 object-cover object-center flex-shrink-0 rounded-full mr-4\" onError={(e)=>{e.target.onerror = null; e.target.src=\"https://picsum.photos/id/1042/100/100\"}} src={ticket.hinhAnh}/>\r\n                <div className=\"flex-grow\">\r\n                    <h2 className=\"text-red-600 text-xl title-font font-medium\">{ticket.tenPhim} </h2>\r\n                    <p className=\"text-white\">{moment(ticket.ngayDat).format('hh:mm A')} - Ngày chiếu {moment(ticket.ngayDat).format('DD-MM-YYYY')} </p>\r\n                    <p>Địa điểm {seats.tenHeThongRap} </p>\r\n                    <p>Tên rạp : {seats.tenCumRap} - Ghế số {ticket.danhSachGhe.map((ghe,index) => {return <span key={index}>{ghe.tenGhe} </span>})} </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        })\r\n    }\r\n    \r\n    return <div className=\"text-gray-600 body-font\">\r\n        <div className=\"container px-5 py-24 mx-auto\">\r\n            <div className=\"flex flex-col text-center w-full mb-20\">\r\n                <h1 className=\"sm:text-3xl text-2xl font-medium title-font mb-4 text-white\">Lịch sử đặt vé khách hàng</h1>\r\n                <p className=\"lg:w-2/3 mx-auto leading-relaxed text-base text-white\">Hãy xem thông tin địa chỉ và thời gian để xem phim vui vẻ bạn nhe !</p>\r\n                <div className=\"text-red-600 text-lg cursor-pointer\" onClick={()=>{\r\n                    history.push('/home');\r\n                }}>Trang chủ</div>\r\n            </div>\r\n            <div className=\"flex flex-wrap -m-2\">\r\n                {renderTicketItem()}\r\n                \r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n}\r\n\r\nconst { TabPane } = Tabs;\r\n\r\n\r\nexport default function (props) {\r\n    const {tabActive} = useSelector(state => state.QuanLyDatVeReducer);\r\n\r\n    const dispatch = useDispatch();\r\n    // console.log({tabActive});\r\n\r\n    return <div className={`${styles['backGround']}`} style={{padding:'10px'}}>\r\n        <Tabs className=\"text-white\"  defaultActiveKey=\"1\" activeKey={tabActive} onChange={(key)=>{\r\n            dispatch({\r\n                type:'CHANGE_TAB_ACTIVE',\r\n                number:key.toString()\r\n            })\r\n        }}>\r\n            <TabPane tab=\"01 Chọn ghế & thanh toán\" key=\"1\"  >\r\n                <Checkout {...props} />\r\n            </TabPane>\r\n            <TabPane tab=\"02 Kết quả đặt vé \" key=\"2\" >\r\n                <KetQuaDatVe {...props} />\r\n            </TabPane>\r\n\r\n        </Tabs>\r\n    </div>\r\n};\r\n\r\n\r\n"],"sourceRoot":""}