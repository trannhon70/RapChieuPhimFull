{"version":3,"sources":["services/QuanLyNguoiDungService.js","redux/actions/QuanLyNguoiDungAction.js","pages/Register/Register.js"],"names":["QLNguoiDungService","dangNhap","thongTinDangNhap","post","dangKy","thongTinNguoiDung","layLichSuDatVe","baseService","dangNhapAction","dispatch","a","result","localStorage","setItem","USER_LOGIN","JSON","stringify","data","content","TOKEN","accessToken","console","log","type","DANG_NHAP_ACTION","userLogin","alert","history","goBack","response","dangKyAction","push","e","LayThongTinNguoiDungAction","SET_THONG_TIN_NGUOI_DUNG","Register","props","useDispatch","formik","useFormik","initialValues","taiKhoan","matKhau","email","soDt","hoTen","maNhom","onSubmit","values","className","handleSubmit","name","onChange","handleChange","required","href","onClick","window","location","reload"],"mappings":"sSAsBaA,EAAqB,IAlBlC,kDACI,aAAc,IAAD,8BACT,gBAGJC,SAAU,SAACC,GACP,OAAO,EAAKC,KAAL,gCAA0CD,IALxC,EAQbE,OAAO,SAACC,GACJ,OAAO,EAAKF,KAAK,8BAA8BE,IATtC,EAYbC,eAAiB,WACb,OAAO,EAAKH,KAAK,0CAbR,EADjB,U,OAA4CI,I,SC2B/BC,EAAe,SAACN,GACzB,8CAAO,WAAMO,GAAN,iBAAAC,EAAA,+EAEsBV,EAAmBC,SAASC,GAFlD,OAEOS,EAFP,OAICC,aAAaC,QAAQC,IAAWC,KAAKC,UAAUL,EAAOM,KAAKC,UAC3DN,aAAaC,QAAQM,IAAMR,EAAOM,KAAKC,QAAQE,aAC/CC,QAAQC,IAAI,SAASX,GACrBF,EAAS,CACLc,KAAMC,IACNC,UAAWd,EAAOM,KAAKC,UAI3BQ,MAAM,kEAENC,IAAQC,SAfT,kDAkBCP,QAAQC,IAAI,MAAZ,UAAkB,KAAIO,gBAAtB,aAAkB,EAAcZ,MAChCS,MAAM,wEAnBP,0DAAP,uDA+BSI,EAAe,SAACzB,GACzB,8CAAO,WAAMI,GAAN,eAAAC,EAAA,+EAEsBV,EAAmBI,OAAOC,GAFhD,OAEOM,EAFP,OAICe,MAAM,iGACNC,IAAQI,KAAK,UACbV,QAAQC,IAAI,CAACX,WANd,gDASCU,QAAQC,IAAI,CAACU,EAAC,OACdN,MAAM,8GAVP,yDAAP,uDAeSO,EAA2B,SAAC/B,GACrC,8CAAO,WAAMO,GAAN,iBAAAC,EAAA,+EAEsBV,EAAmBM,iBAFzC,OAEOK,EAFP,OAGCU,QAAQC,IAAI,SAASX,GACrBF,EAAS,CACLc,KAAMW,IACN7B,kBAAmBM,EAAOM,KAAKC,UANpC,gDAYCG,QAAQC,IAAI,MAAZ,UAAkB,KAAIO,gBAAtB,aAAkB,EAAcZ,MAZjC,yDAAP,wD,uDChFJ,6GASe,SAASkB,EAASC,GAC7B,IAAM3B,EAAW4B,cACXC,EAASC,YAAU,CACrBC,cAAe,CACXC,SAAU,GACVC,QAAS,GACTC,MAAO,GACPC,KAAM,GACNC,MAAO,GACPC,OAAQ,QAIZC,SAAU,SAAAC,GAEN3B,QAAQC,IAAI,SAAU0B,GACtBvC,EAASqB,YAAakB,OAK9B,OACI,sBAAKC,UAAU,YAAf,UACI,oBAAIA,UAAU,WAAd,mBACA,uBAAMF,SAAUT,EAAOY,aAAvB,UAEI,sBAAKD,UAAU,WAAf,UACI,uBAAO1B,KAAK,OAAO4B,KAAK,QAAQC,SAAUd,EAAOe,aAAcC,UAAQ,IACvE,2DAGJ,sBAAKL,UAAU,WAAf,UACI,uBAAO1B,KAAK,OAAO4B,KAAK,WAAWC,SAAUd,EAAOe,aAAcC,UAAQ,IAC1E,gDAGJ,sBAAKL,UAAU,WAAf,UACI,uBAAO1B,KAAK,WAAW4B,KAAK,UAAUC,SAAUd,EAAOe,aAAcC,UAAQ,IAC7E,gDAEJ,sBAAKL,UAAU,WAAf,UACI,uBAAO1B,KAAK,OAAO4B,KAAK,QAAQC,SAAUd,EAAOe,aAAcC,UAAQ,IACvE,6CAGJ,sBAAKL,UAAU,WAAf,UACI,uBAAO1B,KAAK,OAAO4B,KAAK,OAAOC,SAAUd,EAAOe,aAAcC,UAAQ,IACtE,qDAGJ,sBAAKL,UAAU,cAAf,UACI,yBAAQ1B,KAAK,SAASgC,KAAK,IAA3B,UACI,yBACA,yBACA,yBACA,yBAJJ,WAOA,yBAAQC,QAAS,WACb7B,IAAQI,KAAK,SACb0B,OAAOC,SAASC,UACjBJ,KAAK,IAHR,UAII,yBACA,yBACA,yBACA,yBAPJ","file":"static/js/15.ca7d557a.chunk.js","sourcesContent":["import { GROUPID } from \"../util/settings/Config\";\r\nimport { baseService } from \"./BaseSevice\";\r\n\r\n\r\nexport class QuanLyNguoiDungService extends baseService{\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    dangNhap =(thongTinDangNhap)=>{//taiKhaon:'', matKhau:''\r\n        return this.post(`/api/QuanLyNguoiDung/DangNhap`,thongTinDangNhap);\r\n    }\r\n\r\n    dangKy=(thongTinNguoiDung)=>{\r\n        return this.post('/api/QuanLyNguoiDung/DangKy',thongTinNguoiDung);\r\n    }\r\n    \r\n    layLichSuDatVe = ()=>{\r\n        return this.post('/api/QuanLyNguoiDung/ThongTinTaiKhoan');\r\n    }\r\n}\r\n\r\nexport const QLNguoiDungService = new QuanLyNguoiDungService();","import axios from \"axios\";\r\nimport { history } from \"../../App\";\r\nimport { QLNguoiDungService } from \"../../services/QuanLyNguoiDungService\";\r\nimport { DOMAIN, TOKEN, USER_LOGIN } from \"../../util/settings/Config\";\r\nimport { DANG_NHAP_ACTION, SET_THONG_TIN_NGUOI_DUNG } from \"./types/QuanLyNguoiDungType\";\r\n\r\nexport const getCheckoutAction = () => {\r\n    return async dispatch => {\r\n        try{\r\n            const result = await axios({\r\n                url:`${DOMAIN}/api/QuanLyNguoiDung/ThongTinTaiKhoan`,\r\n                method:'POST',\r\n                headers:{\r\n                    \"Authorization\": `Bearer ${localStorage.getItem(TOKEN)}`\r\n                }});\r\n\r\n\r\n                //Sau khi có dữ liệu từ api => dispatch lên reducer\r\n\r\n                dispatch({\r\n                    type:'SET_PROFILE',\r\n                    profile:result.data.content\r\n                })\r\n            \r\n\r\n        }catch(err){\r\n            console.log({err})\r\n        }\r\n    }\r\n}\r\n\r\nexport const dangNhapAction=(thongTinDangNhap)=>{\r\n    return async dispatch=>{\r\n        try{\r\n            const result = await QLNguoiDungService.dangNhap(thongTinDangNhap);\r\n            //lưu thông tin đăng nhập người dùng vào localStorage\r\n            localStorage.setItem(USER_LOGIN,JSON.stringify(result.data.content));\r\n            localStorage.setItem(TOKEN,result.data.content.accessToken);          \r\n            console.log('result',result);\r\n            dispatch({\r\n                type: DANG_NHAP_ACTION,\r\n                userLogin: result.data.content,\r\n                \r\n            })\r\n            //dùng history để chuyển trang tương ứng bên trong component là props.history.push\r\n            alert('Bạn đã đăng nhập thành công ');\r\n            //  history.push('/detail/:id');\r\n            history.goBack();\r\n            // window.location.reload(); \r\n        }catch(err){\r\n            console.log('err',err.response?.data);\r\n            alert('Tài khoản hoặc mật khẩu không đúng');\r\n        }\r\n    }\r\n}\r\n// thông tin người dùng{\r\n//     \"taiKhoan\": \"string\",\r\n//     \"matKhau\": \"string\",\r\n//     \"email\": \"string\",\r\n//     \"soDt\": \"string\",\r\n//     \"maNhom\": \"string\",\r\n//     \"hoTen\": \"string\"\r\n//   }\r\nexport const dangKyAction = (thongTinNguoiDung)=>{\r\n    return async dispatch=>{\r\n        try {\r\n            const result = await QLNguoiDungService.dangKy(thongTinNguoiDung);\r\n            //sau khi đăng ký thành công chuyển hướng tranh\r\n            alert('Chúc mừng bạn đã đăng ký tài khoản thành công');\r\n            history.push('/login');\r\n            console.log({result});\r\n        }\r\n        catch (e) {\r\n            console.log({e});\r\n            alert('Tài khoản hoặc email của bạn đã được đăng ký !!');\r\n        }\r\n    }\r\n}\r\n\r\nexport const LayThongTinNguoiDungAction=(thongTinDangNhap)=>{\r\n    return async dispatch=>{\r\n        try{\r\n            const result = await QLNguoiDungService.layLichSuDatVe();\r\n            console.log('result',result);\r\n            dispatch({\r\n                type: SET_THONG_TIN_NGUOI_DUNG,\r\n                thongTinNguoiDung: result.data.content\r\n            })\r\n            //dùng history để chuyển trang tương ứng bên trong component là props.history.push\r\n            \r\n           \r\n        }catch(err){\r\n            console.log('err',err.response?.data);\r\n            \r\n        }\r\n    }\r\n}","import { useFormik } from 'formik';\r\nimport React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { dangKyAction } from '../../redux/actions/QuanLyNguoiDungAction';\r\nimport './Register.scss';\r\n\r\nimport { history } from '../../App';\r\n\r\n\r\nexport default function Register(props) {\r\n    const dispatch = useDispatch();\r\n    const formik = useFormik({\r\n        initialValues: {\r\n            taiKhoan: '',\r\n            matKhau: '',\r\n            email: '',\r\n            soDt: '',\r\n            hoTen: '',\r\n            maNhom: 'GP01'\r\n\r\n        },\r\n       \r\n        onSubmit: values => {\r\n            // dispatch(dangNhapAction(values));\r\n            console.log('values', values);\r\n            dispatch(dangKyAction(values));\r\n        },\r\n    });\r\n\r\n\r\n    return (\r\n        <div className=\"login-box\">\r\n            <h2 className=\"text-2xl\">Sigup</h2>\r\n            <form onSubmit={formik.handleSubmit}>\r\n\r\n                <div className=\"user-box\">\r\n                    <input type=\"text\" name=\"hoTen\" onChange={formik.handleChange} required />\r\n                    <label>first and last name</label>\r\n\r\n                </div>\r\n                <div className=\"user-box\">\r\n                    <input type=\"text\" name=\"taiKhoan\" onChange={formik.handleChange} required />\r\n                    <label>Username</label>\r\n\r\n                </div>\r\n                <div className=\"user-box\">\r\n                    <input type=\"password\" name=\"matKhau\" onChange={formik.handleChange} required />\r\n                    <label>Password</label>\r\n                </div>\r\n                <div className=\"user-box\">\r\n                    <input type=\"text\" name=\"email\" onChange={formik.handleChange} required />\r\n                    <label>Email</label>\r\n\r\n                </div>\r\n                <div className=\"user-box\">\r\n                    <input type=\"text\" name=\"soDt\" onChange={formik.handleChange} required />\r\n                    <label>Phone number </label>\r\n                </div>\r\n\r\n                <div className=\"flex gap-24\">\r\n                    <button type=\"submit\" href=\"#\">\r\n                        <span />\r\n                        <span />\r\n                        <span />\r\n                        <span />\r\n                        Sigup\r\n                    </button>\r\n                    <button onClick={() => {\r\n                        history.push('/home')\r\n                        window.location.reload()\r\n                    }} href=\"#\">\r\n                        <span />\r\n                        <span />\r\n                        <span />\r\n                        <span />\r\n                        Home\r\n                    </button>\r\n\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n// \"taiKhoan\": \"string\",\r\n//   \"matKhau\": \"string\",\r\n//   \"email\": \"string\",\r\n//   \"soDt\": \"string\",\r\n//   \"maNhom\": \"string\",\r\n//   \"hoTen\": \"string\""],"sourceRoot":""}